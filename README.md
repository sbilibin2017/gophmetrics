# Яндекс Практикум "Продвинутый Go-разработчик" (Трек: metrics(gophmetrics))

## Описание

Проект **gophmetrics** — это система сбора, передачи и хранения метрик с разделением на две части: сервер и агент.

| Компонент | Описание |
|-----------|----------|
| **Сервер** | Предоставляет REST API для работы с метриками: обновление метрик, получение значений конкретных метрик, получение списка всех метрик. Принимает и хранит метрики двух типов — gauge (float64) и counter (int64). |
| **Агент**  | HTTP-клиент, который регулярно собирает метрики из рантайма Go (пакет `runtime`) и дополнительные метрики, а затем отправляет их на сервер по HTTP. |

---

## Структура проекта

```
.
├── cmd                        # Основные исполняемые пакеты (точки входа в приложение)
│   ├── agent                 # Папка с точкой входа для клиента (агента)
│   │   └── main.go           # Главный файл запуска агента
│   └── server                # Папка с точкой входа для сервера
│       └── main.go           # Главный файл запуска сервера
├── go.mod                    # Модульный файл Go, содержит информацию о зависимостях
├── go.sum                    # Контрольные суммы всех зависимостей для верификации
├── internal                  # Внутренний код приложения, не предназначенный для внешнего использования
│   ├── apps                  # Основные приложения: агент и сервер
│   │   ├── agent             # Логика агента (сбор метрик, конфигурация, запуск)
│   │   │   ├── agent.go          # Основная реализация агента
│   │   │   ├── agent_mock.go     # Моки для тестирования агента
│   │   │   ├── agent_test.go     # Тесты для агента
│   │   │   ├── config.go         # Конфигурация агента
│   │   │   ├── config_test.go    # Тесты для конфигурации агента
│   │   │   ├── run.go            # Запуск и жизненный цикл агента
│   │   │   └── run_test.go       # Тесты запуска агента
│   │   └── server            # Логика сервера (конфигурация, запуск, воркеры)
│   │       ├── config.go         # Конфигурация сервера
│   │       ├── config_test.go    # Тесты для конфигурации сервера
│   │       ├── run.go            # Запуск и жизненный цикл сервера
│   │       ├── run_test.go       # Тесты запуска сервера
│   │       ├── worker.go         # Логика фоновых задач (воркеры)
│   │       ├── worker_mock.go    # Моки для воркеров
│   │       └── worker_test.go    # Тесты для воркеров
│   ├── configs               # Конфигурационные подсистемы
│   │   ├── address           # Работа с адресами (хост, порт и т.п.)
│   │   │   ├── address.go
│   │   │   └── address_test.go
│   │   ├── db                # Настройка подключения к базе данных
│   │   │   ├── db.go
│   │   │   └── db_test.go
│   │   └── transport         # Настройка транспортного уровня (HTTP и пр.)
│   │       └── http
│   │           ├── client.go       # HTTP клиент для взаимодействия с сервером
│   │           └── client_test.go  # Тесты для HTTP клиента
│   ├── facades               # Фасады/интерфейсы для внешних систем
│   │   └── http
│   │       ├── metric.go     # Обработка метрик через HTTP (внешний API)
│   │       └── metric_test.go # Тесты для фасада метрик
│   ├── handlers              # HTTP-обработчики входящих запросов
│   │   └── http
│   │       ├── metric.go         # HTTP-обработчик для метрик
│   │       ├── metric_mock.go    # Моки для тестов обработчика метрик
│   │       └── metric_test.go    # Тесты для HTTP-обработчика метрик
│   ├── middlewares           # HTTP middleware (промежуточные обработчики)
│   │   └── http
│   │       ├── gzip.go           # Middleware для сжатия/распаковки GZIP
│   │       ├── gzip_test.go      # Тесты для GZIP middleware
│   │       ├── logging.go        # Middleware для логирования HTTP-запросов
│   │       └── logging_test.go   # Тесты для логирующего middleware
│   ├── models                # Модели данных, используемые в приложении
│   │   └── metrics.go        # Структура метрик и их типы
│   ├── repositories          # Слой хранения данных (репозитории)
│   │   ├── db                # Репозиторий для работы с метриками в базе данных
│   │   │   ├── metric.go
│   │   │   └── metric_test.go
│   │   ├── file              # Репозиторий для хранения метрик в файлах
│   │   │   ├── metric.go
│   │   │   └── metric_test.go
│   │   └── memory            # Репозиторий в памяти (in-memory)
│   │       ├── metric.go
│   │       └── metric_test.go
│   └── services              # Бизнес-логика по работе с метриками
│       ├── metric.go
│       ├── metric_mock.go
│       └── metric_test.go
├── Makefile                  # Скрипты сборки, тестирования и запуска (make-команды)
├── migrations
│   └── 20250806013842_create_metrics_table.sql # SQL-миграция для создания таблицы метрик
└── README.md                 # Документация по проекту

```

---