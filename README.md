# Яндекс Практикум "Продвинутый Go-разработчик" (Трек: metrics(gophmetrics))

## Описание

Проект **gophmetrics** — это система сбора, передачи и хранения метрик с разделением на две части: сервер и агент.

| Компонент | Описание |
|-----------|----------|
| **Сервер** | Предоставляет REST API для работы с метриками: обновление метрик, получение значений конкретных метрик, получение списка всех метрик. Принимает и хранит метрики двух типов — gauge (float64) и counter (int64). |
| **Агент**  | HTTP-клиент, который регулярно собирает метрики из рантайма Go (пакет `runtime`) и дополнительные метрики, а затем отправляет их на сервер по HTTP. |

---

## Структура проекта

```
.
├── cmd                        # Основные исполняемые пакеты (точки входа в приложение)
│   ├── agent                 # Папка с точкой входа для клиента (агента)
│   │   └── main.go           # Главный файл запуска агента
│   └── server                # Папка с точкой входа для сервера
│       └── main.go           # Главный файл запуска сервера
├── go.mod                    # Модульный файл Go, содержит информацию о зависимостях
├── go.sum                    # Контрольные суммы всех зависимостей для верификации
├── internal                  # Внутренний код приложения, не предназначенный для внешнего использования
│   ├── agent                 # Логика агента (сбор метрик и отправка на сервер)
│   │   ├── agent.go          # Основная реализация агента
│   │   ├── agent_mock.go     # Мок (заглушка) для тестирования агента
│   │   └── agent_test.go     # Тесты для агента
│   ├── configs               # Конфигурации приложения
│   │   ├── address           # Подсистема конфигурации адресов
│   │   │   ├── address.go    # Работа с адресами (например, хост и порт)
│   │   │   └── address_test.go # Тесты для конфигурации адресов
│   │   ├── db                # Конфигурация базы данных
│   │   │   ├── db.go         # Настройка подключения к БД
│   │   │   └── db_test.go    # Тесты для настройки базы данных
│   │   └── transport         # Конфигурация транспорта (HTTP и т.д.)
│   │       └── http
│   │           ├── client.go     # HTTP клиент для взаимодействия с сервером
│   │           └── client_test.go # Тесты для HTTP клиента
│   ├── facades               # Интерфейсы/фасады для взаимодействия с внешними системами
│   │   └── http
│   │       ├── metric.go     # Обработка метрик через HTTP (внешний API)
│   │       └── metric_test.go # Тесты для фасада метрик
│   ├── handlers              # HTTP-обработчики входящих запросов
│   │   └── http
│   │       ├── metric.go         # HTTP-обработчик для метрик
│   │       ├── metric_mock.go    # Моки для тестов обработчика метрик
│   │       └── metric_test.go    # Тесты для HTTP-обработчика метрик
│   ├── middlewares           # HTTP middleware’ы (промежуточные обработчики)
│   │   └── http
│   │       ├── gzip.go           # Middleware для сжатия/распаковки GZIP
│   │       ├── gzip_test.go      # Тесты для GZIP middleware
│   │       ├── logging.go        # Middleware для логирования HTTP-запросов
│   │       └── logging_test.go   # Тесты для логирующего middleware
│   ├── models                # Модели данных, используемые в приложении
│   │   └── metrics.go        # Структура метрик и их типы
│   ├── repositories          # Слой хранения данных (репозитории)
│   │   ├── db                # Репозиторий для работы с метриками в БД
│   │   │   ├── metric.go         # Реализация репозитория с использованием PostgreSQL
│   │   │   └── metric_test.go    # Тесты для репозитория на базе БД
│   │   ├── file              # Репозиторий для хранения метрик в файле
│   │   │   ├── metric.go         # Реализация файлового репозитория
│   │   │   └── metric_test.go    # Тесты для файлового репозитория
│   │   └── memory            # Репозиторий в памяти (in-memory)
│   │       ├── metric.go         # Реализация in-memory репозитория
│   │       └── metric_test.go    # Тесты для in-memory репозитория
│   ├── services              # Бизнес-логика обработки метрик
│   │   ├── metric.go         # Сервис для работы с метриками
│   │   ├── metric_mock.go    # Моки для тестов сервиса метрик
│   │   └── metric_test.go    # Тесты для сервиса метрик
│   └── worker                # Компоненты для фоновых задач (воркеры)
│       ├── worker.go         # Основная логика воркера
│       ├── worker_mock.go    # Моки для воркера
│       └── worker_test.go    # Тесты для воркера
├── Makefile                  # Скрипты сборки, тестирования и запуска (make-команды)
├── migrations
│   └── 20250806013842_create_metrics_table.sql # SQL-миграция для создания таблицы метрик
└── README.md                 # Документация по проекту
```

---